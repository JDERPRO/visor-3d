import"./modulepreload-polyfill-B5Qt9EMX.js";import{B as k,V as w,a as Q,i as K,Z as ee,D as te,P as ne,_ as oe}from"./three-B4arhRS6.js";import{p as ae,C as ie,s as se,i as re,H as le,d as ce,h as de,R as fe}from"./thatopen-CwLPH9ho.js";async function me(e){const n=new ae,t=n.get(ie),o=t.create();o.scene=new se(n),o.renderer=new re(n,e),o.camera=new le(n),n.init(),o.scene.setup(),o.camera.controls.setLookAt(12,12,12,0,0,0);const a=n.get(ce).create(o),r=n.get(de);let l=null;try{l=n.get(fe),await l.setup(),l.settings.wasm={path:"https://unpkg.com/web-ifc@0.0.55/",absolute:!0},console.log("[Viewer] IfcLoader ready")}catch(d){console.warn("[Viewer] IfcLoader not available:",d.message)}const s=new ResizeObserver(()=>{o.renderer&&o.renderer.resize()});s.observe(e);const c={components:n,worlds:t,world:o,grid:a,fragmentsManager:r,ifcLoader:l,container:e,_resizeObserver:s};return window.__viewer=c,c}async function H(e,n,t="Model"){const{fragmentsManager:o,world:i}=e,a=await fetch(n);if(!a.ok)throw new Error(`HTTP ${a.status}: No se pudo descargar el modelo`);const r=await a.arrayBuffer(),l=new Uint8Array(r),s=n.split("?")[0].split(".").pop().toLowerCase();let c;return s==="ifc"?c=await Y(e,l):(c=o.load(l),X(e,c),V(e,c),G(e)),c}async function O(e,n){if(n.name.split(".").pop().toLowerCase()==="ifc")return await Y(e,n);const o=await n.arrayBuffer(),i=new Uint8Array(o),{fragmentsManager:a}=e,r=a.load(i);return X(e,r),V(e,r),G(e),r}async function Y(e,n){const{ifcLoader:t,world:o}=e;if(!t)throw new Error("IfcLoader no disponible en esta versión");let i;n instanceof File?i=await n.arrayBuffer():i=n.buffer||n;const a=new Uint8Array(i),r=await t.load(a);return r&&(o.scene.three.add(r),console.log("[Viewer] IFC Model added. Children:",r.children.length),V(e,r),G(e)),r}function X(e,n){const{world:t,fragmentsManager:o}=e;n&&(t.scene.three.add(n),console.log("[Viewer] Model added to scene. Children:",n.children.length),n.children.length===0&&o.groups.size>0&&(console.log("[Viewer] Re-adding fragment groups individually..."),o.groups.forEach(i=>{(!i.parent||i.parent!==t.scene.three)&&t.scene.three.add(i)})))}function V(e,n){const{world:t}=e;if(!n)return;const o=new k().setFromObject(n);if(o.isEmpty()){console.warn("[Viewer] Model bounding box is empty");return}const i=o.getCenter(new w),a=o.getSize(new w),l=Math.max(a.x,a.y,a.z)*1.5;t.camera.controls.setLookAt(i.x+l*.7,i.y+l*.7,i.z+l*.7,i.x,i.y,i.z,!0)}function U(e){if(!e)return;const{world:n,fragmentsManager:t}=e,o=new k;let i=!1;if(t.groups.forEach(c=>{const d=new k().setFromObject(c);d.isEmpty()||(o.union(d),i=!0)}),!i){const c=new k().setFromObject(n.scene.three);if(c.isEmpty())return;o.copy(c)}const a=o.getCenter(new w),r=o.getSize(new w),s=Math.max(r.x,r.y,r.z)*1.5;n.camera.controls.setLookAt(a.x+s*.7,a.y+s*.7,a.z+s*.7,a.x,a.y,a.z,!0)}function G(e,n){const{fragmentsManager:t}=e,o=document.getElementById("info-elements"),i=document.getElementById("info-fragments");if(o){let a=0;t.groups.forEach(r=>{r.items&&(a+=r.items.length),a+=r.children?.length||0}),o.textContent=a.toLocaleString()}i&&(i.textContent=t.groups.size.toLocaleString())}function z(e){const n=document.getElementById("loading-status");n&&(n.textContent=e)}function B(e){const n=document.getElementById("loading-bar");n&&(n.style.width=`${Math.min(100,Math.max(0,e))}%`)}function _(){const e=document.getElementById("loading-screen");e&&(e.classList.add("fade-out"),setTimeout(()=>{e.style.display="none"},600))}let P=null;function x(e,n=3e3){const t=document.getElementById("toast"),o=document.getElementById("toast-message");!t||!o||(P&&clearTimeout(P),o.textContent=e,t.classList.remove("toast-hidden"),P=setTimeout(()=>{t.classList.add("toast-hidden"),P=null},n))}let $=null,A=new Q,D=null,h=null,F=new Map,S=null;function pe(e,n){const{world:t,container:o}=e;$=new K,$.params.Mesh={threshold:.1},S=n,D=new ee({color:58879,emissive:58879,emissiveIntensity:.3,transparent:!0,opacity:.85,side:te,depthTest:!0,polygonOffset:!0,polygonOffsetFactor:-1});let i=null,a=0;const r=o.querySelector("canvas")||o;r.addEventListener("pointerdown",l=>{i={x:l.clientX,y:l.clientY},a=performance.now()}),r.addEventListener("pointerup",l=>{if(!i)return;const s=l.clientX-i.x,c=l.clientY-i.y,d=Math.sqrt(s*s+c*c),m=performance.now()-a;i=null,d<5&&m<400&&ue(l,e)}),r.addEventListener("dblclick",()=>{Z(),S&&S(null)}),console.log("[Selection] Initialized")}function N(e){if(!e)return!1;if(e.isGridHelper||e.isHelper)return!0;const n=(e.name||"").toLowerCase();if(n==="grid"||n.includes("grid")||n.includes("helper"))return!0;let t=e.parent;for(;t;){if(t.isGridHelper||t.isHelper)return!0;const o=(t.name||"").toLowerCase();if(o==="grid"||o.includes("gridhelper")||t.constructor?.name==="SimpleGrid")return!0;t=t.parent}if(e.geometry){const o=e.geometry.attributes?.position;if(o&&o.count<=6){const i=e.material;if(i&&i.type==="ShaderMaterial")return!0}}return!1}function ue(e,n){const{world:t,container:o}=n,a=(t.renderer?.three?.domElement||o.querySelector("canvas")||o).getBoundingClientRect();A.x=(e.clientX-a.left)/a.width*2-1,A.y=-((e.clientY-a.top)/a.height)*2+1;const r=t.camera.three;$.setFromCamera(A,r);const l=[];t.scene.three.traverse(c=>{if(c.isMesh&&c.visible){if(N(c))return;l.push(c)}});const s=$.intersectObjects(l,!1);if(s.length>0){let c=null,d=null;for(const u of s)if(!N(u.object)){c=u,d=u.object;break}if(!c||!d)return;const m=ge(d);ye(d);const g=Ee(d,m,c,n);S&&S(g)}}function ge(e){let n=e;for(;n;){if(n.isGroup&&(n.ifcMetadata||n.items||n.uuid)&&n.children?.length>0&&n.children.some(t=>t.isMesh))return n;n=n.parent}return null}function ye(e,n){W(),Array.isArray(e.material)?(F.set(e.uuid,e.material.map(t=>t)),e.material=e.material.map(()=>D)):(F.set(e.uuid,e.material),e.material=D),h=e}function W(){h&&F.has(h.uuid)&&(h.material=F.get(h.uuid),F.delete(h.uuid)),h=null}function Z(e){W()}const xe={3588315303:"IfcWall",1529196076:"IfcSlab",843113511:"IfcColumn",753842376:"IfcBeam",395920057:"IfcDoor",3304561284:"IfcWindow",2262370178:"IfcRailing",331165859:"IfcStairFlight",338393293:"IfcStair",1687234759:"IfcPlate",1281925730:"IfcCovering",2979338954:"IfcBuildingElementProxy",4031249490:"IfcSite",4146886087:"IfcBuilding",3124254112:"IfcBuildingStorey",3856911033:"IfcSpace",1051757585:"IfcFurnishingElement",263784265:"IfcFurniture",900683007:"IfcFooting",2391383451:"IfcCurtainWall",1073191201:"IfcMember",2188021234:"IfcFlowTerminal",3512223829:"IfcWallStandardCase",1095909175:"IfcProduct",180925521:"IfcSIUnit",2624227202:"IfcLocalPlacement",1040185647:"IfcMaterialLayerSetUsage",3303938423:"IfcMaterialLayerSet",248100487:"IfcMaterialLayer",1959218052:"IfcCartesianPoint",3113134337:"IfcShapeRepresentation"};function be(e){return xe[e]||null}function Ee(e,n,t,o){const{fragmentsManager:i}=o,a={general:{},geometry:{},material:{},ifc:{},position:{}};if(a.general.Nombre=e.name||"(sin nombre)",a.general.ID=e.uuid.substring(0,8),a.general.Tipo=e.type||"Mesh",e.geometry){const s=e.geometry,c=s.attributes?.position?.count||0,d=s.index?.count||0,m=d?d/3:c/3;if(a.geometry.Vértices=c.toLocaleString(),a.geometry.Triángulos=Math.floor(m).toLocaleString(),s.boundingBox||s.computeBoundingBox(),s.boundingBox){const g=new w;s.boundingBox.getSize(g),a.geometry["Ancho (X)"]=g.x.toFixed(3)+" m",a.geometry["Alto (Y)"]=g.y.toFixed(3)+" m",a.geometry["Profundidad (Z)"]=g.z.toFixed(3)+" m"}}t.point&&(a.position.X=t.point.x.toFixed(3),a.position.Y=t.point.y.toFixed(3),a.position.Z=t.point.z.toFixed(3)),t.faceIndex!==void 0&&(a.position.Cara=t.faceIndex.toLocaleString()),a.position.Distancia=t.distance.toFixed(2)+" m";const r=Array.isArray(e.material)?e.material[0]:e.material;r&&r!==D&&(a.material["Tipo Material"]=r.type||"Unknown",r.color&&(a.material.Color="#"+r.color.getHexString()),r.opacity!==void 0&&r.opacity<1&&(a.material.Opacidad=(r.opacity*100).toFixed(0)+"%"),r.transparent&&(a.material.Transparente="Sí"));const l=new Set(["expressID","type","LengthExponent","MassExponent","TimeExponent","ElectricCurrentExponent","ThermodynamicTemperatureExponent","AmountOfSubstanceExponent","LuminousIntensityExponent","ParameterTakesPrecedence","Sizeable","Exponent","Dimensions","UnitType","Prefix","ConversionFactor","ValueComponent","UnitComponent","OwnerHistory","RepresentationContexts","UnitsInContext"]);try{i&&i.groups&&i.groups.forEach(s=>{let c=!1;if(s.traverse(d=>{d===e&&(c=!0)}),c&&(s.ifcMetadata?.name&&(a.ifc["Nombre IFC"]=s.ifcMetadata.name),s.ifcMetadata?.schema&&(a.ifc.Schema=s.ifcMetadata.schema),s.getLocalProperties))try{const d=s.getLocalProperties();if(!d)return;let m=null;if(e.expressID!==void 0&&(m=e.expressID),!m&&s.items){for(const[g,u]of s.items)if(u&&u.size>0){for(const y of s.children)if(y===e&&u.size>0){m=[...u][0];break}}}if(!m){const g=s.children.indexOf(e);if(g>=0&&s.items){const u=[...s.items.entries()];if(g<u.length){const[,y]=u[g];y&&y.size>0&&(m=[...y][0])}}}if(m){a.ifc.expressID=m;const g=d[m];if(g)for(const[u,y]of Object.entries(g)){if(l.has(u))continue;let I=null;y!=null&&(typeof y=="object"&&y!==null?y.value!==void 0?I=y.value:y.type!==void 0&&y.Name?.value&&(I=y.Name.value):I=y,I!=null&&I!==""&&(a.ifc[u]=String(I)))}if(g?.type){const u=be(g.type);u&&(a.ifc["Categoría IFC"]=u)}}}catch(d){console.warn("[Selection] Error reading fragment properties:",d)}})}catch(s){console.warn("[Selection] Error reading fragment data:",s)}for(const s of Object.keys(a))Object.keys(a[s]).length===0&&delete a[s];return a}function q(e){const n=document.getElementById("properties-content");if(!n)return;if(!e){n.innerHTML=`
            <div class="empty-panel">
                <i class="fas fa-mouse-pointer"></i>
                <p>Selecciona un elemento del modelo para ver sus propiedades</p>
            </div>
        `;return}const t={general:{label:"General",icon:"fas fa-cube"},ifc:{label:"IFC",icon:"fas fa-building"},geometry:{label:"Geometría",icon:"fas fa-shapes"},position:{label:"Punto de intersección",icon:"fas fa-crosshairs"},material:{label:"Material",icon:"fas fa-palette"}};let o="";for(const[i,a]of Object.entries(e)){const r=t[i]||{label:i,icon:"fas fa-tag"},l=Object.entries(a);if(l.length!==0){o+='<div class="prop-group">',o+=`<div class="prop-group-title"><i class="${r.icon}" style="margin-right: 6px;"></i>${r.label}</div>`;for(const[s,c]of l){let d=String(c);s==="Color"&&d.startsWith("#")&&(d=`<span style="display: inline-flex; align-items: center; gap: 6px;">
                    <span style="width: 12px; height: 12px; border-radius: 2px; background: ${d}; border: 1px solid rgba(255,255,255,0.2); display: inline-block;"></span>
                    ${d}
                </span>`),o+='<div class="prop-item">',o+=`<span class="prop-key">${s}</span>`,o+=`<span class="prop-val">${d}</span>`,o+="</div>"}o+="</div>"}}n.innerHTML=o}const v=[{key:"x",label:"X",color:"#ef4444",colorHex:15680580,normal:new w(-1,0,0),icon:"fa-arrows-alt-h"},{key:"y",label:"Y",color:"#22c55e",colorHex:2278750,normal:new w(0,-1,0),icon:"fa-arrows-alt-v"},{key:"z",label:"Z",color:"#3b82f6",colorHex:3900150,normal:new w(0,0,-1),icon:"fa-compress-alt"}];let E={},b={},L={},p={},M=null,T=!1;function we(e){M=e;const n=e.world.renderer.three;n.localClippingEnabled=!0;for(const t of v){const o=new ne(t.normal.clone(),0);E[t.key]=o,L[t.key]=!1,p[t.key]={min:-50,max:50}}T=!0,console.log("[Clipper] Initialized")}function ve(e){if(!T)return;const{world:n,fragmentsManager:t}=e||M,o=new k;let i=!1;if(t.groups.forEach(s=>{const c=new k().setFromObject(s);c.isEmpty()||(o.union(c),i=!0)}),!i){const s=new k().setFromObject(n.scene.three);s.isEmpty()||(o.copy(s),i=!0)}if(!i)return;const a=o.min,r=o.max,l=.5;p.x={min:a.x-l,max:r.x+l},p.y={min:a.y-l,max:r.y+l},p.z={min:a.z-l,max:r.z+l};for(const s of v){const c=document.getElementById(`clip-slider-${s.key}`);if(c){const m=p[s.key];c.min=m.min,c.max=m.max,c.step=((m.max-m.min)/200).toFixed(4),c.value=m.max}const d=document.getElementById(`clip-val-${s.key}`);d&&(d.textContent=p[s.key].max.toFixed(1))}for(const s of v)E[s.key].constant=p[s.key].max;console.log("[Clipper] Ranges updated:",p)}function Ie(e,n){if(!T)return;L[e]=n!==void 0?n:!L[e],R();const t=M.world.scene.three;if(L[e]){if(!b[e]){const o=v.find(r=>r.key===e),i=Le(),a=new oe(E[e],i*1.5,o.colorHex);a.name=`clip-helper-${e}`,a.material.opacity=.15,a.material.transparent=!0,b[e]=a}b[e].parent||t.add(b[e]),b[e].visible=!0}else b[e]&&(b[e].visible=!1)}function j(e,n){!T||!E[e]||(E[e].constant=n,b[e]&&b[e].updateMatrixWorld(!0))}function R(){if(!M)return;const e=v.filter(t=>L[t.key]).map(t=>E[t.key]),n=M.world.renderer.three;n.clippingPlanes=e,M.world.scene.three.traverse(t=>{t.isMesh&&t.material&&(Array.isArray(t.material)?t.material:[t.material]).forEach(i=>{i.clippingPlanes=e.length>0?e:null,i.clipShadows=!0,i.needsUpdate=!0})})}function he(){for(const e of v){L[e.key]=!1,E[e.key].constant=p[e.key].max,b[e.key]&&(b[e.key].visible=!1);const n=document.getElementById(`clip-slider-${e.key}`),t=document.getElementById(`clip-toggle-${e.key}`),o=document.getElementById(`clip-val-${e.key}`),i=document.getElementById(`clip-flip-${e.key}`);n&&(n.value=p[e.key].max,n.disabled=!0),t&&t.classList.remove("active"),o&&(o.textContent=p[e.key].max.toFixed(1)),i&&(i.disabled=!0)}R()}function ke(e){E[e]&&(E[e].normal.negate(),R())}function Le(){const e=p.x.max-p.x.min,n=p.y.max-p.y.min,t=p.z.max-p.z.min;return Math.max(e,n,t,20)}function Me(){const e=document.getElementById("clip-panel");if(!e)return;let n="";for(const t of v){const o=p[t.key];n+=`
        <div class="clip-axis" data-axis="${t.key}">
            <div class="clip-axis-header">
                <button class="clip-toggle" id="clip-toggle-${t.key}" title="Activar corte ${t.label}">
                    <span class="clip-axis-badge" style="background:${t.color}">${t.label}</span>
                </button>
                <div class="clip-slider-wrap">
                    <input type="range"
                        class="clip-slider"
                        id="clip-slider-${t.key}"
                        min="${o.min}"
                        max="${o.max}"
                        step="${((o.max-o.min)/200).toFixed(4)}"
                        value="${o.max}"
                        disabled
                    />
                </div>
                <span class="clip-val" id="clip-val-${t.key}">${o.max.toFixed(1)}</span>
                <button class="clip-flip" id="clip-flip-${t.key}" title="Invertir dirección" disabled>
                    <i class="fas fa-exchange-alt"></i>
                </button>
            </div>
        </div>
        `}n+=`
        <div class="clip-actions">
            <button class="clip-reset-btn" id="clip-reset" title="Restablecer cortes">
                <i class="fas fa-undo"></i> Restablecer
            </button>
        </div>
    `,e.innerHTML=n;for(const t of v){const o=document.getElementById(`clip-toggle-${t.key}`),i=document.getElementById(`clip-slider-${t.key}`),a=document.getElementById(`clip-val-${t.key}`),r=document.getElementById(`clip-flip-${t.key}`);o?.addEventListener("click",()=>{const l=!L[t.key];Ie(t.key,l),o.classList.toggle("active",l),i.disabled=!l,r.disabled=!l}),i?.addEventListener("input",l=>{const s=parseFloat(l.target.value);j(t.key,s),a&&(a.textContent=s.toFixed(1))}),r?.addEventListener("click",()=>{ke(t.key);const l=parseFloat(i.min),s=parseFloat(i.max);i.min=-s,i.max=-l,i.value=-parseFloat(i.value);const c=parseFloat(i.value);j(t.key,c),a&&(a.textContent=c.toFixed(1))})}document.getElementById("clip-reset")?.addEventListener("click",()=>{he()})}let f=null,J=!1;async function Ce(){try{z("Inicializando motor 3D..."),B(20),f=await me(document.getElementById("viewer-container")),B(60),z("Motor listo. Buscando modelo...");const e=new URLSearchParams(window.location.search),n=e.get("model"),t=e.get("name")||"Modelo";n?(z(`Cargando: ${t}...`),B(70),await H(f,n,t),J=!0,C(t)):(B(100),_()),Be(),Fe(),Se(),ze(),Pe(),pe(f,o=>{q(o);const i=document.getElementById("properties-panel"),a=document.getElementById("btn-properties");o&&i&&(i.classList.add("panel-open"),a&&a.classList.add("active"))}),we(f)}catch(e){console.error("Boot error:",e),z(`Error: ${e.message}`)}}function C(e){J=!0,B(100);const n=document.getElementById("empty-state");n&&n.classList.add("hidden");const t=document.getElementById("model-info");t&&t.classList.remove("hidden");const o=document.getElementById("model-name");o&&(o.textContent=e),_(),x(`Modelo "${e}" cargado correctamente`),ve(f),Me()}function Be(){document.getElementById("btn-fit")?.addEventListener("click",()=>{f&&(U(f),x("Vista encuadrada"))});const e=document.getElementById("btn-grid");e?.addEventListener("click",()=>{if(f?.grid){const l=f.grid.visible;f.grid.visible=!l,e.classList.toggle("active",!l),x(l?"Grid oculto":"Grid visible")}}),e&&e.classList.add("active");const n={"btn-front":{pos:[0,0,30],target:[0,0,0]},"btn-top":{pos:[0,30,0],target:[0,0,0]},"btn-right":{pos:[30,0,0],target:[0,0,0]},"btn-iso":{pos:[20,20,20],target:[0,0,0]}};for(const[l,s]of Object.entries(n))document.getElementById(l)?.addEventListener("click",()=>{f?.world?.camera?.controls&&f.world.camera.controls.setLookAt(...s.pos,...s.target,!0)});const t=document.getElementById("btn-properties"),o=document.getElementById("properties-panel"),i=document.getElementById("btn-close-properties");t?.addEventListener("click",()=>{o.classList.toggle("panel-open"),t.classList.toggle("active",o.classList.contains("panel-open"))}),i?.addEventListener("click",()=>{o.classList.remove("panel-open"),t?.classList.remove("active")});const a=document.getElementById("btn-clip"),r=document.getElementById("clip-panel");a?.addEventListener("click",()=>{r.classList.toggle("clip-open"),a.classList.toggle("active",r.classList.contains("clip-open"))}),document.getElementById("btn-fullscreen")?.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}),document.getElementById("btn-demo-model")?.addEventListener("click",async()=>{x("Cargando modelo demo...");const l="./Demo.frag";try{await H(f,l,"Demo Model"),C("Demo Model")}catch(s){x("Error cargando demo: "+s.message)}})}function Fe(){const e=document.getElementById("viewer-wrapper"),n=document.getElementById("drop-zone");let t=0;e.addEventListener("dragenter",o=>{o.preventDefault(),t++,n.classList.remove("hidden")}),e.addEventListener("dragleave",o=>{o.preventDefault(),t--,t<=0&&(t=0,n.classList.add("hidden"))}),e.addEventListener("dragover",o=>{o.preventDefault()}),e.addEventListener("drop",async o=>{o.preventDefault(),t=0,n.classList.add("hidden");const i=o.dataTransfer.files[0];if(!i)return;const a=i.name.split(".").pop().toLowerCase();if(!["frag","ifc"].includes(a)){x("Formato no soportado. Usa .frag o .ifc");return}try{x(`Cargando ${i.name}...`),await O(f,i),C(i.name)}catch(r){x("Error: "+r.message)}})}function Se(){const e=document.getElementById("file-input");e?.addEventListener("change",async n=>{const t=n.target.files[0];if(t){try{x(`Cargando ${t.name}...`),await O(f,t),C(t.name)}catch(o){x("Error: "+o.message)}e.value=""}})}function ze(){document.addEventListener("keydown",e=>{(e.key==="f"||e.key==="F")&&f&&U(f),(e.key==="g"||e.key==="G")&&document.getElementById("btn-grid")?.click(),e.key==="Escape"&&(document.getElementById("properties-panel")?.classList.remove("panel-open"),document.getElementById("btn-properties")?.classList.remove("active"),document.getElementById("clip-panel")?.classList.remove("clip-open"),document.getElementById("btn-clip")?.classList.remove("active"),f&&(Z(),q(null))),(e.key==="p"||e.key==="P")&&document.getElementById("btn-properties")?.click()})}function Pe(){window.addEventListener("message",async e=>{const n=e.data;if(!(!n||typeof n!="object"))switch(n.type){case"load-model":if(n.url)try{x("Cargando modelo..."),await H(f,n.url,n.name||"Modelo"),C(n.name||"Modelo"),e.source?.postMessage({type:"model-loaded",success:!0},"*")}catch(t){e.source?.postMessage({type:"model-loaded",success:!1,error:t.message},"*")}break;case"load-model-base64":if(n.base64)try{x("Procesando modelo...");const t=atob(n.base64),o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);const i=new Blob([o]),a=new File([i],n.name||"model.frag");await O(f,a),C(n.name||"model.frag"),e.source?.postMessage({type:"model-loaded",success:!0},"*")}catch(t){e.source?.postMessage({type:"model-loaded",success:!1,error:t.message},"*")}break;case"fit-model":U(f);break;case"load-demo":document.getElementById("btn-demo-model")?.click();break}})}document.addEventListener("DOMContentLoaded",Ce);
